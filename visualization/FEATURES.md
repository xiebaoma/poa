# 🎨 舆情分析系统可视化界面功能特性

## 📊 界面总览

### 整体布局设计

```
┌───────────────────────────────────────────────────────────────┐
│                    📊 舆情分析系统可视化平台                     │
│                                                                 │
├────────────┬────────────────────────────────────────────────────┤
│            │                                                    │
│  侧边栏     │              主内容区 (标签页切换)                 │
│            │                                                    │
│ ⚙️ 系统配置 │  ┌──────────────────────────────────────────┐    │
│            │  │                                          │    │
│ 1️⃣ 数据源  │  │  Tab1: 📋 数据概览                       │    │
│            │  │  - 统计卡片 (总数/正面/中性/负面)         │    │
│ ○ 生成数据  │  │  - 数据表格预览                          │    │
│ ○ 加载数据  │  │                                          │    │
│            │  ├──────────────────────────────────────────┤    │
│ 2️⃣ 分析参数│  │  Tab2: 😊 情感分析                       │    │
│            │  │  - 情感分布饼图                          │    │
│ Top-N: 20  │  │  - 情感统计柱状图                        │    │
│ 时间: day  │  │  - 各来源情感对比                        │    │
│            │  │                                          │    │
│ ───────── │  ├──────────────────────────────────────────┤    │
│            │  │  Tab3: 🔥 热点话题                       │    │
│ 🚀 运行分析│  │  - 高频词Top-N                           │    │
│            │  │  - TF-IDF关键词                          │    │
│ 🗑️ 清除结果│  │  - 趋势上升词汇                          │    │
│            │  │                                          │    │
│            │  ├──────────────────────────────────────────┤    │
│            │  │  Tab4: 📈 趋势分析                       │    │
│            │  │  - 时间序列折线图                        │    │
│            │  │  - 负面比例趋势                          │    │
│            │  │  - 舆情预警信息                          │    │
│            │  └──────────────────────────────────────────┘    │
└────────────┴────────────────────────────────────────────────────┘
```

---

## 🎯 核心功能

### 1. 📋 数据概览模块

#### 功能描述
- 展示数据整体概况
- 快速了解数据规模和情感分布
- 查看原始数据样本

#### 组件详情

**① 统计卡片 (Metrics Cards)**
```
┌──────────────┬──────────────┬──────────────┬──────────────┐
│  📊 总记录数  │  😊 正面     │  😐 中性     │  😞 负面     │
│              │              │              │              │
│   5,000      │   3,200      │     800      │   1,000      │
│              │  ↗ 64.0%     │  ↗ 16.0%     │  ↘ 20.0%     │
└──────────────┴──────────────┴──────────────┴──────────────┘
```

特点:
- 大数字显示，一目了然
- 百分比趋势指示
- 颜色编码（绿色正面，红色负面）

**② 数据表格**
```
┌───────┬──────────────────┬──────┬───────────────┬───────┬───────┐
│ ID    │ 内容             │ 来源 │ 时间          │ 情感  │ 分数  │
├───────┼──────────────────┼──────┼───────────────┼───────┼───────┤
│ 1001  │ 这个产品很好用... │ 微博 │ 2025-12-01... │ 正面  │ 0.85  │
│ 1002  │ 客服态度太差了... │ 评论 │ 2025-12-01... │ 负面  │ -0.72 │
│ ...   │ ...              │ ...  │ ...           │ ...   │ ...   │
└───────┴──────────────────┴──────┴───────────────┴───────┴───────┘
```

特点:
- 分页显示，最多1000条
- 可排序、过滤
- 实时数据预览

---

### 2. 😊 情感分析模块

#### 功能描述
- 多维度情感可视化
- 按来源对比情感分布
- 清晰的情感分类统计

#### 可视化图表

**① 情感分布饼图 (Pie Chart)**
```
         正面 (64%)
       ╱╲
      ╱  ╲
     ╱ 😊 ╲
    ├──────┤
    │  😐  │ 中性 (16%)
    ├──────┤
    │  😞  │ 负面 (20%)
    └──────┘
```

特点:
- 环形图设计
- 百分比标注
- 颜色区分：
  - 🟢 绿色 = 正面
  - ⚪ 灰色 = 中性
  - 🔴 红色 = 负面

**② 情感统计柱状图 (Bar Chart)**
```
数量
4000│     ████████
3000│     ████████  
2000│     ████████  ████
1000│     ████████  ████  ████
   0└─────────────────────────
        正面      中性    负面
```

特点:
- 直观数值对比
- 数值标注
- 交互式悬停

**③ 各来源情感分布 (Grouped Bar Chart)**
```
数量
    │  █                       
    │  █      █                
    │  █  █   █   █            
    │  █  █   █   █   █   █    
    └─────────────────────────
      微博     新闻     评论
      
      █ 正面  █ 中性  █ 负面
```

特点:
- 分组对比
- 多维度分析
- 发现不同平台的情感差异

---

### 3. 🔥 热点话题模块

#### 功能描述
- 发现热门话题和关键词
- TF-IDF重要性分析
- 识别趋势上升词汇

#### 可视化图表

**① 高频词 Top-N (Horizontal Bar Chart)**
```
产品    ████████████████████ 1250
服务    ████████████████ 980
质量    ███████████████ 850
价格    ████████████ 720
功能    ██████████ 650
...
```

特点:
- 横向柱状图，易于阅读
- 蓝色渐变配色
- 按频次降序排列
- 可配置Top-N数量

**② TF-IDF 关键词 (Horizontal Bar Chart)**
```
创新      ████████████████████ 0.85
突破      ████████████████ 0.72
领先      ███████████████ 0.68
专业      ████████████ 0.61
卓越      ██████████ 0.55
...
```

特点:
- 反映词汇重要性
- 橙色渐变配色
- 排除高频但不重要的词
- TF-IDF分数标注

**③ 趋势上升词汇 (Treemap)**
```
┌─────────────────────────────┐
│         AI (580)             │
│        增长率: +320%         │
├──────────────┬───────────────┤
│ 创新 (320)   │  技术 (280)   │
│  +180%       │   +150%       │
├──────────────┼───────────────┤
│ 变革 (220)   │  升级 (180)   │
│  +120%       │   +90%        │
└──────────────┴───────────────┘
```

特点:
- 面积 = 近期频次
- 颜色 = 增长率（绿色高，红色低）
- 发现新兴话题
- 交互式悬停详情

---

### 4. 📈 趋势分析模块

#### 功能描述
- 时间序列情感变化
- 负面情绪监控
- 舆情预警机制

#### 可视化图表

**① 情感随时间变化 (Multi-line Chart)**
```
数量
800│                    ╱╲
   │          ╱╲      ╱  ╲
600│        ╱    ╲  ╱      ╲
   │      ╱        ╲          ╲
400│    ╱                      ╲
   │  ╱                          ╲
200│╱
   └────────────────────────────────
    12-01  12-05  12-10  12-15  12-20
    
    ── 正面  ── 中性  ── 负面
```

特点:
- 三条线对比
- 绿色 = 正面趋势
- 灰色 = 中性趋势
- 红色 = 负面趋势
- 统一悬停显示
- 支持缩放、平移

**② 负面情绪比例 (Area Chart)**
```
比例
60%│
   │                    ╱███╲
40%│- - - - - - - - - ╱- - -╲- - (预警线)
   │                ╱          ╲
20%│          ╱████              ███
   │    ╱████
 0%└────────────────────────────────
    12-01  12-05  12-10  12-15  12-20
```

特点:
- 面积图强调变化
- 预警阈值虚线（默认40%）
- 红色配色突出风险
- 百分比纵轴

**③ 负面舆情预警 (Alert Cards)**
```
┌─────────────────────────────────────────┐
│ ⚠️ 负面舆情预警                          │
├─────────────────────────────────────────┤
│ 时间: 2025-12-15 14:00                  │
│ 负面数量: 450                           │
│ 负面比例: 52.3%                         │
│ 总数: 860                               │
│                                         │
│ 超过预警阈值 12.3 个百分点               │
└─────────────────────────────────────────┘
```

特点:
- 黄色警告卡片
- 详细预警信息
- 多条预警堆叠显示
- 无预警时显示绿色提示

---

## ⚙️ 交互功能

### 1. 参数配置 (左侧边栏)

#### 数据源配置

**选项1: 生成模拟数据**
```
┌─────────────────────────────┐
│ ⚪ 生成模拟数据              │
│ ⚫ 加载已有数据              │
├─────────────────────────────┤
│ 生成记录数                  │
│ ├─────●───────┤ 1000        │
│ 100          10000          │
├─────────────────────────────┤
│ 日期范围                    │
│ 起始: 2025-11-26            │
│ 结束: 2025-12-26            │
└─────────────────────────────┘
```

**选项2: 加载已有数据**
```
┌─────────────────────────────┐
│ ⚪ 生成模拟数据              │
│ ⚫ 加载已有数据              │
├─────────────────────────────┤
│ 数据路径                    │
│ [data/raw            ]      │
├─────────────────────────────┤
│ 文件格式                    │
│ ▼ csv                       │
│   json                      │
│   parquet                   │
└─────────────────────────────┘
```

#### 分析参数配置

```
┌─────────────────────────────┐
│ 2️⃣ 分析参数                 │
├─────────────────────────────┤
│ Top-N 关键词数量            │
│ ├─────●───────┤ 20          │
│ 5            50             │
├─────────────────────────────┤
│ 时间窗口                    │
│ ▼ day                       │
│   hour                      │
│   week                      │
│   month                     │
└─────────────────────────────┘
```

#### 操作按钮

```
┌─────────────────────────────┐
│ ┏━━━━━━━━━━━━━━━━━━━━━━━┓  │
│ ┃   🚀 运行分析          ┃  │
│ ┗━━━━━━━━━━━━━━━━━━━━━━━┛  │
├─────────────────────────────┤
│ ┌───────────────────────┐   │
│ │   🗑️ 清除结果          │   │
│ └───────────────────────┘   │
└─────────────────────────────┘
```

### 2. 进度反馈

#### 分析进度条
```
正在分析中，请稍候...

███████████████░░░░░ 75%

执行情感分析...
```

#### 完成提示
```
┌─────────────────────────────┐
│ ✅ 分析完成！               │
└─────────────────────────────┘
```

### 3. 标签页切换

```
┌──────────┬──────────┬──────────┬──────────┐
│ 📋 数据概览│ 😊 情感分析│ 🔥 热点话题│ 📈 趋势分析│ ← 激活
└──────────┴──────────┴──────────┴──────────┘
```

特点:
- 一键切换视图
- 保持分析结果
- 独立滚动区域

---

## 🎨 设计亮点

### 1. 配色方案

**情感配色**
- 正面: `#2ecc71` (绿色) 🟢
- 中性: `#95a5a6` (灰色) ⚪
- 负面: `#e74c3c` (红色) 🔴

**功能配色**
- 主色调: `#1f77b4` (蓝色)
- 强调色: `#ff7f0e` (橙色)
- 预警色: `#f39c12` (黄色)
- 成功色: `#27ae60` (绿色)

### 2. 交互体验

**响应式设计**
- 自适应屏幕大小
- 移动端友好（部分功能）
- 流畅动画过渡

**用户友好**
- 悬停提示 (Tooltip)
- 加载状态反馈
- 错误提示明确
- 操作可撤销

**性能优化**
- 数据缓存
- 延迟加载
- 分页显示
- 结果复用

### 3. 可访问性

**文字说明**
- 清晰的标签
- 详细的帮助信息
- 错误提示友好

**键盘导航**
- Tab键切换
- Enter确认
- Esc取消

---

## 📱 适用场景

### 场景1: 产品经理日常监控

**需求**: 每日查看产品反馈情况

**使用流程**:
1. 加载当日数据
2. 查看情感分布
3. 关注负面预警
4. 分析热点话题

**关注重点**:
- 负面比例是否上升
- 有无新的负面话题
- 哪些功能被提及

---

### 场景2: 运营活动效果评估

**需求**: 评估营销活动的舆论反馈

**使用流程**:
1. 加载活动期间数据
2. 对比活动前后情感变化
3. 分析讨论热点
4. 识别关键意见

**关注重点**:
- 正面情绪增长
- 活动相关话题热度
- 用户真实反馈

---

### 场景3: 危机公关响应

**需求**: 快速了解负面舆情态势

**使用流程**:
1. 加载相关时间段数据
2. 查看负面趋势图
3. 识别预警时间点
4. 分析负面关键词

**关注重点**:
- 负面爆发时间点
- 主要负面话题
- 影响范围和程度

---

### 场景4: 竞品对比分析

**需求**: 对比自己和竞品的口碑

**使用流程**:
1. 分别加载不同来源数据
2. 对比各来源情感分布
3. 分析话题差异
4. 发现优劣势

**关注重点**:
- 情感分布对比
- 讨论焦点差异
- 优势和弱点

---

## 🔧 高级功能

### 1. 数据导出

虽然当前版本主要是可视化展示，但分析结果自动保存在 `data/results/` 目录:

```
data/results/analysis_20251226_143022/
├── full_results/        # Parquet格式完整结果
├── top_words.csv        # 高频词
├── tfidf_keywords.csv   # TF-IDF关键词
├── sentiment_trend.csv  # 情感趋势数据
└── negative_alerts.csv  # 预警记录
```

### 2. 配置持久化

系统配置保存在 `config.yaml`，支持自定义:

```yaml
processing:
  sentiment:
    method: "dictionary"
  
  trend:
    threshold_negative: 0.4  # 预警阈值
    
  topic:
    top_n: 20
```

### 3. 词典自定义

支持自定义情感词典:

```
src/main/resources/dict/
├── positive_words.txt   # 添加行业正面词
├── negative_words.txt   # 添加行业负面词
└── stopwords.txt        # 添加停用词
```

---

## 🚀 性能特性

### 数据处理能力

| 数据规模 | 处理时间 | 内存占用 |
|---------|---------|---------|
| 1,000条 | ~10秒   | ~500MB  |
| 5,000条 | ~30秒   | ~800MB  |
| 10,000条| ~60秒   | ~1.5GB  |
| 50,000条| ~5分钟  | ~3GB    |

*测试环境: Mac M1, 8GB RAM*

### 优化策略

1. **数据缓存**: 预处理结果缓存，避免重复计算
2. **延迟加载**: 只加载当前视图需要的数据
3. **采样显示**: 大数据表格采样显示
4. **并行计算**: Spark并行处理

---

## 📚 技术实现

### 前端技术栈
- **Streamlit 1.28+**: Web框架
- **Plotly 5.17+**: 交互式图表
- **Pandas**: 数据处理

### 后端技术栈
- **PySpark 3.5+**: 分布式计算
- **Python 3.8+**: 核心语言

### 数据流程
```
用户配置
   ↓
Streamlit UI
   ↓
SentimentAnalysisApp
   ↓
PySpark处理
   ↓
结果转Pandas
   ↓
Plotly可视化
   ↓
Streamlit渲染
```

---

## 📈 未来规划

### 计划功能

1. **实时监控**: 支持流式数据处理
2. **自动刷新**: 定时自动更新数据
3. **邮件预警**: 负面舆情自动发送邮件
4. **报告导出**: 一键生成PDF/Word报告
5. **用户管理**: 多用户权限管理
6. **数据源接入**: 直连API获取数据
7. **机器学习**: 更精准的情感分析模型
8. **话题聚类**: 自动话题分类

---

**当前版本**: v1.0.0
**最后更新**: 2025-12-26

